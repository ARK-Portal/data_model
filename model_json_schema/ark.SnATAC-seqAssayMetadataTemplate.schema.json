{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://example.com/ark",
  "title": "ark",
  "type": "object",
  "properties": {
    "platform": {
      "type": "array",
      "items": {
        "enum": [
          "Cytek Aurora",
          "Xenium",
          "BD FACSLyric Clinical",
          "Chromium Next GEM Chip Q",
          "unknown",
          "Thermo Fisher Attune Xenith",
          "Illumina NovaSeq 6000",
          "Illumina NextSeq 500",
          "Hyperion",
          "Not Applicable",
          "Chromium Controller",
          "Chromium X",
          "BD FACSAria Fusion cell sorter",
          "none",
          "Chromium Xo",
          "Chromium Next GEM Chip M",
          "BD FACSCanto",
          "Illumina HiSeq X Ten",
          "Chromium Next GEM Chip H",
          "BD FACSAria III",
          "BD FACSymphony S6",
          "BD LSRFortessa",
          "Chromium Next GEM Chip K",
          "BD FACSCanto II",
          "Illumina NovaSeq X",
          "Olink Signature Q100",
          "GEM-X OCM 5' Chip",
          "Sony MA900",
          "Visium CytAssist",
          "Illumina HiSeq 2500",
          "Thermo Fisher Attune CytPix",
          "Chromium Next GEM Chip G",
          "BD FACSMelody",
          "Fluidigm BioMark",
          "BD FACSDiscover A8",
          "Thermo Fisher Attune NxT",
          "CyTOF XT",
          "Chromium GEM-X Single Cell 3' Chip v4",
          "Helios Mass Cytometer",
          "GEM-X Flex Gene Expression Chip",
          "BD FACSDiscover S8",
          "Cytek Aurora Evo",
          "Chromium iX"
        ]
      },
      "maxItems": 43
    },
    "totalReads": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "inputCellCount": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "nucleicAcidSource": {
      "type": "array",
      "items": {
        "enum": [
          "CRISPR protospacer feature barcode",
          "surface protein feature barcode",
          "globin-depleted RNA",
          "TCR mRNA",
          "antigen capture barcode",
          "BCR mRNA",
          "rRNA-depleted RNA",
          "intracellular protein feature barcode",
          "gDNA",
          "poly(A) RNA",
          "multiplexing oligo",
          "Tn5-accessible gDNA"
        ]
      },
      "maxItems": 12
    },
    "alignmentReference": {
      "enum": [
        "10x Cell Ranger Human GRCh38 2020-A",
        "vdj_GRCh38_alts_ensembl-4.0.0",
        "10x Cell Ranger Human GRCh38 2024-A",
        "unknown"
      ]
    },
    "libraryPrepMethod": {
      "enum": [
        "SMARTer Stranded Total RNA v2",
        "Takara Human TCRv2 profiling for Illumina",
        "Nextera XT DNA",
        "10x Chromium Next GEM Single Cell 5' v1.1",
        "Takara Human TCR profiling for Illumina",
        "TruSeq Stranded mRNA",
        "10x GEM-X Flex Gene Expression Human",
        "10x GEM-X Universal 5? Gene Expression v3",
        "CEL-Seq2",
        "Nextera XT",
        "QIAseq miRNA Library",
        "Takara Human BCR profiling for Illumina",
        "10x Chromium Next GEM Single Cell 3' 3.1",
        "NEBNext Ultra II Directional RNA Library",
        "10x Chromium Fixed RNA Human Transcriptome",
        "10x Chromium Next GEM Single Cell 5' v2",
        "10x Chromium Next GEM Single Cell 3'",
        "Fluidigm C1 HT",
        "10x Chromium Single Cell Human BCR",
        "10x Chromium GEM-X Single Cell 3' v4",
        "NEBNext Human Immune Sequencing Kit",
        "SMART-Seq Human TCR with UMI",
        "SMART-Seq Human BCR with UMI",
        "Takara Human scTCR profiling for Illumina",
        "in-house library prep",
        "10x Chromium GEM-X Single Cell 5' v3",
        "custom DASH-treatment",
        "10x Chromium Single Cell Human TCR",
        "SMART-Seq v4 Ultra Low Input RNA",
        "10x Chromium Next GEM Single Cell ATAC v2",
        "Chromium Next GEM Single Cell ATAC v1.1"
      ]
    },
    "softwareAndVersion": {
      "enum": [
        "Cell Ranger v6.1.0",
        "Cell Ranger v6.1.2",
        "Space Ranger 3.1.1",
        "Cell Ranger v6.0.2",
        "Cell Ranger 9.0.1",
        "BD FACSDiva 8.0.1",
        "Cell Ranger v7.2.0",
        "Cell Ranger v9.0.0",
        "demuxlet",
        "Cell Ranger v7.0.1",
        "Cell Ranger v8.0.0",
        "Cell Ranger v4.0.0",
        "Cell Ranger v7.0.0",
        "Cell Ranger v8.0.1",
        "Cell Ranger v6.0.0",
        "Cell Ranger v5.0.1",
        "Cell Ranger v7.1.0",
        "Cell Ranger v3.1.0",
        "Space Ranger 3.0.0",
        "Space Ranger 3.1.3",
        "Cell Ranger v5.0.0",
        "Space Ranger 3.1.2",
        "Cell Ranger v3.0.1",
        "Cell Ranger v3.0.2",
        "Space Ranger 3.1.0",
        "Space Ranger 3.0.1",
        "Cell Ranger v3.0.0",
        "Cell Ranger v6.0.1",
        "Cell Ranger v6.1.1",
        "Cell Ranger ATAC v1.1.0",
        ""
      ]
    },
    "sampleProcessingBatch": {},
    "percentCellViability": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "assay": {
      "type": "array",
      "items": {
        "enum": [
          "RNASeq",
          "SomaScan",
          "Xenium",
          "CyTOF",
          "multiplexed ELISA",
          "WES",
          "serial IHC",
          "scVDJSeq",
          "VDJSeq",
          "imaging mass spectrometry",
          "ASAPSeq",
          "kiloplex",
          "CosMX",
          "feature barcode sequencing",
          "flow cytometry",
          "snATACSeq",
          "Olink Reveal",
          "Olink Target 48",
          "LC-MS/MS",
          "scRNASeq",
          "CE-MS",
          "Olink Target 96",
          "snRNASeq",
          "Olink Flex",
          "SNP array",
          "imaging mass cytometry",
          "Olink Focus",
          "CITESeq",
          "H&E",
          "WGS",
          "Olink Explore HT",
          "NULISA"
        ]
      },
      "maxItems": 32
    },
    "sequencingSaturation": {},
    "Component": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "specimenModality": {
      "enum": [
        "multispecimen",
        "single specimen"
      ]
    },
    "dataCollectionBatch": {},
    "10xProbeSetReference": {
      "enum": [
        "Flex Human Transcriptome Probe Set v1.1.0",
        "custom probe set",
        "Visium Human Transcriptome v2",
        "Visium Human Transcriptome v1",
        "Flex Human Transcriptome Probe Set v1.0.1",
        ""
      ]
    },
    "libraryID": {},
    "biospecimenID": {}
  },
  "required": [
    "platform",
    "totalReads",
    "inputCellCount",
    "nucleicAcidSource",
    "alignmentReference",
    "libraryPrepMethod",
    "percentCellViability",
    "assay",
    "Component",
    "specimenModality"
  ],
  "allOf": [
    {
      "if": {
        "properties": {
          "libraryPrepMethod": {
            "enum": [
              "10x GEM-X Flex Gene Expression Human"
            ]
          }
        },
        "required": [
          "libraryPrepMethod"
        ]
      },
      "then": {
        "properties": {
          "10xProbeSetReference": {
            "enum": [
              "Flex Human Transcriptome Probe Set v1.1.0",
              "custom probe set",
              "Visium Human Transcriptome v2",
              "Visium Human Transcriptome v1",
              "Flex Human Transcriptome Probe Set v1.0.1"
            ]
          }
        },
        "required": [
          "10xProbeSetReference"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "specimenModality": {
            "enum": [
              "multispecimen"
            ]
          }
        },
        "required": [
          "specimenModality"
        ]
      },
      "then": {
        "properties": {
          "libraryID": {}
        },
        "required": [
          "libraryID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "specimenModality": {
            "enum": [
              "single specimen"
            ]
          }
        },
        "required": [
          "specimenModality"
        ]
      },
      "then": {
        "properties": {
          "biospecimenID": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "biospecimenID"
        ]
      }
    }
  ]
}