{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://example.com/ark",
  "title": "ark",
  "type": "object",
  "properties": {
    "platform": {
      "type": "array",
      "items": {
        "enum": [
          "Chromium Controller",
          "Cytek Aurora",
          "BD FACSAria Fusion cell sorter",
          "BD FACSymphony S6",
          "BD FACSMelody",
          "Illumina NextSeq 500",
          "Illumina NovaSeq X",
          "Illumina HiSeq X Ten",
          "BD FACSDiscover S8",
          "Not Applicable",
          "Thermo Fisher Attune CytPix",
          "Chromium Next GEM Chip M",
          "Xenium",
          "Chromium GEM-X Single Cell 3' Chip v4",
          "Chromium Next GEM Chip G",
          "GEM-X OCM 5' Chip",
          "Cytek Aurora Evo",
          "BD FACSCanto",
          "BD FACSDiscover A8",
          "Olink Signature Q100",
          "Illumina NovaSeq 6000",
          "Chromium Next GEM Chip K",
          "BD FACSAria III",
          "Chromium Next GEM Chip Q",
          "Illumina HiSeq 2500",
          "unknown",
          "Visium CytAssist",
          "CyTOF XT",
          "Fluidigm BioMark",
          "Chromium Xo",
          "BD FACSLyric Clinical",
          "Chromium Next GEM Chip H",
          "BD LSRFortessa",
          "BD FACSCanto II",
          "Sony MA900",
          "Chromium iX",
          "Hyperion",
          "Chromium X",
          "Thermo Fisher Attune Xenith",
          "GEM-X Flex Gene Expression Chip",
          "none",
          "Helios Mass Cytometer",
          "Thermo Fisher Attune NxT"
        ]
      },
      "maxItems": 43
    },
    "libraryPrepMethod": {
      "enum": [
        "SMART-Seq Human TCR with UMI",
        "Takara Human scTCR profiling for Illumina",
        "Takara Human BCR profiling for Illumina",
        "CEL-Seq2",
        "Chromium Next GEM Single Cell ATAC v1.1",
        "NEBNext Ultra II Directional RNA Library",
        "Nextera XT",
        "10x Chromium Next GEM Single Cell 5' v1.1",
        "TruSeq Stranded mRNA",
        "Fluidigm C1 HT",
        "10x Chromium Fixed RNA Human Transcriptome",
        "QIAseq miRNA Library",
        "Takara Human TCRv2 profiling for Illumina",
        "10x Chromium Single Cell Human BCR",
        "10x GEM-X Universal 5? Gene Expression v3",
        "SMART-Seq Human BCR with UMI",
        "10x Chromium Single Cell Human TCR",
        "10x Chromium GEM-X Single Cell 3' v4",
        "in-house library prep",
        "10x Chromium GEM-X Single Cell 5' v3",
        "10x Chromium Next GEM Single Cell 3' 3.1",
        "10x GEM-X Flex Gene Expression Human",
        "Nextera XT DNA",
        "10x Chromium Next GEM Single Cell ATAC v2",
        "10x Chromium Next GEM Single Cell 5' v2",
        "10x Chromium Next GEM Single Cell 3'",
        "SMART-Seq v4 Ultra Low Input RNA",
        "NEBNext Human Immune Sequencing Kit",
        "custom DASH-treatment",
        "SMARTer Stranded Total RNA v2",
        "Takara Human TCR profiling for Illumina"
      ]
    },
    "specimenModality": {
      "enum": [
        "single specimen",
        "multispecimen"
      ]
    },
    "sampleProcessingBatch": {},
    "alignmentReference": {
      "enum": [
        "unknown",
        "10x Cell Ranger Human GRCh38 2024-A",
        "10x Cell Ranger Human GRCh38 2020-A",
        "vdj_GRCh38_alts_ensembl-4.0.0"
      ]
    },
    "totalReads": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "nucleicAcidSource": {
      "type": "array",
      "items": {
        "enum": [
          "Tn5-accessible gDNA",
          "surface protein feature barcode",
          "intracellular protein feature barcode",
          "gDNA",
          "multiplexing oligo",
          "rRNA-depleted RNA",
          "BCR mRNA",
          "CRISPR protospacer feature barcode",
          "antigen capture barcode",
          "globin-depleted RNA",
          "TCR mRNA",
          "poly(A) RNA"
        ]
      },
      "maxItems": 12
    },
    "Component": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "assay": {
      "type": "array",
      "items": {
        "enum": [
          "imaging mass spectrometry",
          "SNP array",
          "SomaScan",
          "Olink Flex",
          "snATACSeq",
          "RNASeq",
          "feature barcode sequencing",
          "scVDJSeq",
          "Olink Target 48",
          "VDJSeq",
          "kiloplex",
          "CosMX",
          "Xenium",
          "CITESeq",
          "CyTOF",
          "CE-MS",
          "Olink Focus",
          "Olink Explore HT",
          "Olink Target 96",
          "Olink Reveal",
          "WES",
          "serial IHC",
          "multiplexed ELISA",
          "LC-MS/MS",
          "WGS",
          "scRNASeq",
          "ASAPSeq",
          "NULISA",
          "H&E",
          "snRNASeq",
          "flow cytometry",
          "imaging mass cytometry"
        ]
      },
      "maxItems": 32
    },
    "softwareAndVersion": {
      "enum": [
        "Cell Ranger v8.0.0",
        "Cell Ranger v6.1.2",
        "Cell Ranger v3.0.0",
        "Cell Ranger v3.1.0",
        "Cell Ranger v8.0.1",
        "Cell Ranger v7.1.0",
        "Cell Ranger v3.0.1",
        "Cell Ranger v7.0.1",
        "Space Ranger 3.1.1",
        "Cell Ranger ATAC v1.1.0",
        "Space Ranger 3.1.0",
        "BD FACSDiva 8.0.1",
        "Space Ranger 3.0.0",
        "Space Ranger 3.1.2",
        "Cell Ranger 9.0.1",
        "Cell Ranger v6.0.0",
        "Cell Ranger v4.0.0",
        "Space Ranger 3.0.1",
        "Cell Ranger v6.1.0",
        "Cell Ranger v3.0.2",
        "Cell Ranger v6.1.1",
        "Cell Ranger v7.2.0",
        "Space Ranger 3.1.3",
        "Cell Ranger v5.0.0",
        "Cell Ranger v6.0.1",
        "Cell Ranger v5.0.1",
        "demuxlet",
        "Cell Ranger v9.0.0",
        "Cell Ranger v7.0.0",
        "Cell Ranger v6.0.2",
        ""
      ]
    },
    "dataCollectionBatch": {},
    "10xProbeSetReference": {
      "enum": [
        "Visium Human Transcriptome v1",
        "Flex Human Transcriptome Probe Set v1.0.1",
        "custom probe set",
        "Flex Human Transcriptome Probe Set v1.1.0",
        "Visium Human Transcriptome v2",
        ""
      ]
    },
    "biospecimenID": {},
    "libraryID": {}
  },
  "required": [
    "platform",
    "libraryPrepMethod",
    "specimenModality",
    "alignmentReference",
    "totalReads",
    "nucleicAcidSource",
    "Component",
    "assay"
  ],
  "allOf": [
    {
      "if": {
        "properties": {
          "libraryPrepMethod": {
            "enum": [
              "10x GEM-X Flex Gene Expression Human"
            ]
          }
        },
        "required": [
          "libraryPrepMethod"
        ]
      },
      "then": {
        "properties": {
          "10xProbeSetReference": {
            "enum": [
              "Visium Human Transcriptome v1",
              "Flex Human Transcriptome Probe Set v1.0.1",
              "custom probe set",
              "Flex Human Transcriptome Probe Set v1.1.0",
              "Visium Human Transcriptome v2"
            ]
          }
        },
        "required": [
          "10xProbeSetReference"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "specimenModality": {
            "enum": [
              "single specimen"
            ]
          }
        },
        "required": [
          "specimenModality"
        ]
      },
      "then": {
        "properties": {
          "biospecimenID": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "biospecimenID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "specimenModality": {
            "enum": [
              "multispecimen"
            ]
          }
        },
        "required": [
          "specimenModality"
        ]
      },
      "then": {
        "properties": {
          "libraryID": {}
        },
        "required": [
          "libraryID"
        ]
      }
    }
  ]
}