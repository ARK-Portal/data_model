{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://example.com/ark",
  "title": "ark",
  "type": "object",
  "properties": {
    "platform": {
      "type": "array",
      "items": {
        "enum": [
          "Thermo Fisher Attune Xenith",
          "Chromium Next GEM Chip Q",
          "Sony MA900",
          "Illumina NextSeq 500",
          "Chromium Next GEM Chip M",
          "GEM-X Flex Gene Expression Chip",
          "none",
          "BD FACSMelody",
          "Visium CytAssist",
          "Illumina NovaSeq X",
          "Thermo Fisher Attune NxT",
          "Helios Mass Cytometer",
          "Fluidigm BioMark",
          "BD FACSDiscover A8",
          "BD FACSCanto II",
          "Cytek Aurora Evo",
          "Xenium",
          "Illumina HiSeq 2500",
          "Chromium Next GEM Chip K",
          "Chromium Next GEM Chip H",
          "Chromium Controller",
          "Olink Signature Q100",
          "Chromium GEM-X Single Cell 3' Chip v4",
          "unknown",
          "Cytek Aurora",
          "BD FACSCanto",
          "BD LSRFortessa",
          "Chromium X",
          "Hyperion",
          "BD FACSymphony S6",
          "Chromium iX",
          "Chromium Next GEM Chip G",
          "CyTOF XT",
          "BD FACSAria III",
          "Chromium Xo",
          "Illumina HiSeq X Ten",
          "BD FACSAria Fusion cell sorter",
          "BD FACSLyric Clinical",
          "GEM-X OCM 5' Chip",
          "BD FACSDiscover S8",
          "Illumina NovaSeq 6000",
          "Thermo Fisher Attune CytPix",
          "Not Applicable"
        ]
      },
      "maxItems": 43
    },
    "softwareAndVersion": {
      "enum": [
        "Space Ranger 3.0.0",
        "Cell Ranger v6.1.0",
        "Cell Ranger v3.0.0",
        "Cell Ranger v8.0.1",
        "Cell Ranger v6.1.1",
        "Cell Ranger v6.0.1",
        "Cell Ranger v7.0.1",
        "Cell Ranger v7.0.0",
        "Space Ranger 3.1.0",
        "Cell Ranger v7.1.0",
        "Space Ranger 3.0.1",
        "Space Ranger 3.1.2",
        "Cell Ranger v6.0.2",
        "Cell Ranger v7.2.0",
        "Cell Ranger 9.0.1",
        "Cell Ranger v4.0.0",
        "Cell Ranger v6.0.0",
        "Cell Ranger v5.0.0",
        "Cell Ranger v9.0.0",
        "Cell Ranger v3.0.2",
        "Cell Ranger v5.0.1",
        "Cell Ranger v6.1.2",
        "demuxlet",
        "Cell Ranger v3.0.1",
        "BD FACSDiva 8.0.1",
        "Cell Ranger ATAC v1.1.0",
        "Cell Ranger v8.0.0",
        "Space Ranger 3.1.1",
        "Cell Ranger v3.1.0",
        "Space Ranger 3.1.3",
        ""
      ]
    },
    "specimenModality": {
      "enum": [
        "single specimen",
        "multispecimen"
      ]
    },
    "alignmentReference": {
      "enum": [
        "unknown",
        "vdj_GRCh38_alts_ensembl-4.0.0",
        "10x Cell Ranger Human GRCh38 2024-A",
        "10x Cell Ranger Human GRCh38 2020-A"
      ]
    },
    "sampleProcessingBatch": {},
    "dataCollectionBatch": {},
    "nucleicAcidSource": {
      "type": "array",
      "items": {
        "enum": [
          "antigen capture barcode",
          "Tn5-accessible gDNA",
          "BCR mRNA",
          "intracellular protein feature barcode",
          "rRNA-depleted RNA",
          "CRISPR protospacer feature barcode",
          "gDNA",
          "surface protein feature barcode",
          "TCR mRNA",
          "poly(A) RNA",
          "multiplexing oligo",
          "globin-depleted RNA"
        ]
      },
      "maxItems": 12
    },
    "libraryPrepMethod": {
      "enum": [
        "10x Chromium GEM-X Single Cell 5' v3",
        "10x GEM-X Universal 5? Gene Expression v3",
        "10x Chromium Single Cell Human BCR",
        "Takara Human BCR profiling for Illumina",
        "Nextera XT",
        "10x GEM-X Flex Gene Expression Human",
        "Takara Human TCR profiling for Illumina",
        "CEL-Seq2",
        "10x Chromium Next GEM Single Cell ATAC v2",
        "NEBNext Human Immune Sequencing Kit",
        "SMART-Seq Human BCR with UMI",
        "10x Chromium Next GEM Single Cell 5' v2",
        "10x Chromium Next GEM Single Cell 5' v1.1",
        "custom DASH-treatment",
        "10x Chromium GEM-X Single Cell 3' v4",
        "10x Chromium Single Cell Human TCR",
        "in-house library prep",
        "Takara Human TCRv2 profiling for Illumina",
        "SMART-Seq v4 Ultra Low Input RNA",
        "10x Chromium Next GEM Single Cell 3' 3.1",
        "SMART-Seq Human TCR with UMI",
        "QIAseq miRNA Library",
        "SMARTer Stranded Total RNA v2",
        "10x Chromium Next GEM Single Cell 3'",
        "Nextera XT DNA",
        "Fluidigm C1 HT",
        "NEBNext Ultra II Directional RNA Library",
        "Takara Human scTCR profiling for Illumina",
        "10x Chromium Fixed RNA Human Transcriptome",
        "TruSeq Stranded mRNA",
        "Chromium Next GEM Single Cell ATAC v1.1"
      ]
    },
    "Component": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "totalReads": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "assay": {
      "type": "array",
      "items": {
        "enum": [
          "multiplexed ELISA",
          "scRNASeq",
          "SomaScan",
          "WGS",
          "imaging mass spectrometry",
          "LC-MS/MS",
          "CITESeq",
          "Xenium",
          "Olink Explore HT",
          "imaging mass cytometry",
          "feature barcode sequencing",
          "CE-MS",
          "WES",
          "Olink Target 96",
          "SNP array",
          "CosMX",
          "CyTOF",
          "Olink Flex",
          "Olink Focus",
          "scVDJSeq",
          "VDJSeq",
          "Olink Reveal",
          "serial IHC",
          "flow cytometry",
          "kiloplex",
          "ASAPSeq",
          "RNASeq",
          "H&E",
          "snRNASeq",
          "NULISA",
          "Olink Target 48",
          "snATACSeq"
        ]
      },
      "maxItems": 32
    },
    "biospecimenID": {},
    "libraryID": {},
    "10xProbeSetReference": {
      "enum": [
        "Visium Human Transcriptome v1",
        "Flex Human Transcriptome Probe Set v1.1.0",
        "custom probe set",
        "Flex Human Transcriptome Probe Set v1.0.1",
        "Visium Human Transcriptome v2",
        ""
      ]
    }
  },
  "required": [
    "platform",
    "specimenModality",
    "alignmentReference",
    "nucleicAcidSource",
    "libraryPrepMethod",
    "Component",
    "totalReads",
    "assay"
  ],
  "allOf": [
    {
      "if": {
        "properties": {
          "specimenModality": {
            "enum": [
              "single specimen"
            ]
          }
        },
        "required": [
          "specimenModality"
        ]
      },
      "then": {
        "properties": {
          "biospecimenID": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "biospecimenID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "specimenModality": {
            "enum": [
              "multispecimen"
            ]
          }
        },
        "required": [
          "specimenModality"
        ]
      },
      "then": {
        "properties": {
          "libraryID": {}
        },
        "required": [
          "libraryID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "libraryPrepMethod": {
            "enum": [
              "10x GEM-X Flex Gene Expression Human"
            ]
          }
        },
        "required": [
          "libraryPrepMethod"
        ]
      },
      "then": {
        "properties": {
          "10xProbeSetReference": {
            "enum": [
              "Visium Human Transcriptome v1",
              "Flex Human Transcriptome Probe Set v1.1.0",
              "custom probe set",
              "Flex Human Transcriptome Probe Set v1.0.1",
              "Visium Human Transcriptome v2"
            ]
          }
        },
        "required": [
          "10xProbeSetReference"
        ]
      }
    }
  ]
}