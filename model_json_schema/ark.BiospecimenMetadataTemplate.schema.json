{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://example.com/BiospecimenMetadataTemplate",
  "title": "BiospecimenMetadataTemplate",
  "type": "object",
  "properties": {
    "biospecimenID": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "biospecimenSubtype": {
      "enum": [
        "frozen tissue",
        "FFPE tissue",
        "nuclei suspension",
        "flow-sorted cells",
        "cell suspension",
        "PFA-fixed tissue",
        "fresh tissue",
        ""
      ]
    },
    "Component": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "visitID": {},
    "project": {
      "enum": [
        "V-CoRT",
        "SLE",
        "STAMP",
        "LOCKIT",
        "RA",
        "ELLIPSS",
        "AIM for RA"
      ]
    },
    "parentBiospecimenID": {},
    "program": {
      "enum": [
        "AMP AIM",
        "AMP RA/SLE",
        "Community Contribution"
      ]
    },
    "individualID": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "biospecimenType": {
      "enum": [
        "total leukocytes",
        "urine",
        "plasma",
        "kidney biopsy",
        "whole blood",
        "skin swab",
        "uvea",
        "skin biopsy",
        "PBMCs",
        "suction blister fluid",
        "none",
        "suction blister cells",
        "serum",
        "salivary gland",
        "fibroblast-like synoviocyte",
        "saliva",
        "synovial tissue",
        "synovial fluid",
        "stool"
      ]
    },
    "cellType": {},
    "cellOntologyID": {},
    "userDefinedCellType": {},
    "FACSPopulation": {},
    "programPhase": {
      "enum": [
        "I",
        "II",
        ""
      ]
    },
    "skinSiteStatus": {
      "enum": [
        "non-lesional",
        "lesional",
        "lesional proximal",
        "healthy control",
        ""
      ]
    },
    "anatomicalSite": {
      "enum": [
        "right 1st MTP joint",
        "right 2nd MTP joint",
        "right 2nd MCP joint",
        "right wrist joint",
        "unknown",
        "left wrist joint",
        "left hip joint",
        "left knee joint",
        "right knee joint",
        "right 3rd MCP joint",
        "right ankle joint",
        "other site",
        "right hip joint",
        "left ankle joint",
        "left 2nd MCP joint",
        ""
      ]
    },
    "FMAID": {},
    "salivaCollectionProcedure": {
      "enum": [
        "stimulated",
        "unstimulated",
        ""
      ]
    },
    "krennInflammatory": {},
    "krennSynovitisScore": {},
    "synovialCollectionProcedure": {
      "enum": [
        "arthroplasty",
        "synovectomy",
        "biopsy",
        ""
      ]
    },
    "krennStroma": {},
    "krennLining": {}
  },
  "required": [
    "biospecimenID",
    "Component",
    "project",
    "program",
    "individualID",
    "biospecimenType"
  ],
  "allOf": [
    {
      "if": {
        "properties": {
          "biospecimenSubtype": {
            "enum": [
              "flow-sorted cells"
            ]
          }
        },
        "required": [
          "biospecimenSubtype"
        ]
      },
      "then": {
        "properties": {
          "cellType": {}
        },
        "required": [
          "cellType"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenSubtype": {
            "enum": [
              "cell suspension"
            ]
          }
        },
        "required": [
          "biospecimenSubtype"
        ]
      },
      "then": {
        "properties": {
          "cellType": {}
        },
        "required": [
          "cellType"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenSubtype": {
            "enum": [
              "flow-sorted cells"
            ]
          }
        },
        "required": [
          "biospecimenSubtype"
        ]
      },
      "then": {
        "properties": {
          "cellOntologyID": {}
        },
        "required": [
          "cellOntologyID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenSubtype": {
            "enum": [
              "cell suspension"
            ]
          }
        },
        "required": [
          "biospecimenSubtype"
        ]
      },
      "then": {
        "properties": {
          "cellOntologyID": {}
        },
        "required": [
          "cellOntologyID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenSubtype": {
            "enum": [
              "flow-sorted cells"
            ]
          }
        },
        "required": [
          "biospecimenSubtype"
        ]
      },
      "then": {
        "properties": {
          "userDefinedCellType": {}
        },
        "required": [
          "userDefinedCellType"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenSubtype": {
            "enum": [
              "cell suspension"
            ]
          }
        },
        "required": [
          "biospecimenSubtype"
        ]
      },
      "then": {
        "properties": {
          "userDefinedCellType": {}
        },
        "required": [
          "userDefinedCellType"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenSubtype": {
            "enum": [
              "flow-sorted cells"
            ]
          }
        },
        "required": [
          "biospecimenSubtype"
        ]
      },
      "then": {
        "properties": {
          "FACSPopulation": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "FACSPopulation"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "program": {
            "enum": [
              "AMP RA/SLE"
            ]
          }
        },
        "required": [
          "program"
        ]
      },
      "then": {
        "properties": {
          "programPhase": {
            "enum": [
              "I",
              "II"
            ]
          }
        },
        "required": [
          "programPhase"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "skin swab"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "skinSiteStatus": {
            "enum": [
              "non-lesional",
              "lesional",
              "lesional proximal",
              "healthy control"
            ]
          }
        },
        "required": [
          "skinSiteStatus"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "skin biopsy"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "skinSiteStatus": {
            "enum": [
              "non-lesional",
              "lesional",
              "lesional proximal",
              "healthy control"
            ]
          }
        },
        "required": [
          "skinSiteStatus"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "suction blister fluid"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "skinSiteStatus": {
            "enum": [
              "non-lesional",
              "lesional",
              "lesional proximal",
              "healthy control"
            ]
          }
        },
        "required": [
          "skinSiteStatus"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "suction blister cells"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "skinSiteStatus": {
            "enum": [
              "non-lesional",
              "lesional",
              "lesional proximal",
              "healthy control"
            ]
          }
        },
        "required": [
          "skinSiteStatus"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "skin swab"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "anatomicalSite": {
            "enum": [
              "right 1st MTP joint",
              "right 2nd MTP joint",
              "right 2nd MCP joint",
              "right wrist joint",
              "unknown",
              "left wrist joint",
              "left hip joint",
              "left knee joint",
              "right knee joint",
              "right 3rd MCP joint",
              "right ankle joint",
              "other site",
              "right hip joint",
              "left ankle joint",
              "left 2nd MCP joint"
            ]
          }
        },
        "required": [
          "anatomicalSite"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "skin biopsy"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "anatomicalSite": {
            "enum": [
              "right 1st MTP joint",
              "right 2nd MTP joint",
              "right 2nd MCP joint",
              "right wrist joint",
              "unknown",
              "left wrist joint",
              "left hip joint",
              "left knee joint",
              "right knee joint",
              "right 3rd MCP joint",
              "right ankle joint",
              "other site",
              "right hip joint",
              "left ankle joint",
              "left 2nd MCP joint"
            ]
          }
        },
        "required": [
          "anatomicalSite"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "suction blister fluid"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "anatomicalSite": {
            "enum": [
              "right 1st MTP joint",
              "right 2nd MTP joint",
              "right 2nd MCP joint",
              "right wrist joint",
              "unknown",
              "left wrist joint",
              "left hip joint",
              "left knee joint",
              "right knee joint",
              "right 3rd MCP joint",
              "right ankle joint",
              "other site",
              "right hip joint",
              "left ankle joint",
              "left 2nd MCP joint"
            ]
          }
        },
        "required": [
          "anatomicalSite"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "suction blister cells"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "anatomicalSite": {
            "enum": [
              "right 1st MTP joint",
              "right 2nd MTP joint",
              "right 2nd MCP joint",
              "right wrist joint",
              "unknown",
              "left wrist joint",
              "left hip joint",
              "left knee joint",
              "right knee joint",
              "right 3rd MCP joint",
              "right ankle joint",
              "other site",
              "right hip joint",
              "left ankle joint",
              "left 2nd MCP joint"
            ]
          }
        },
        "required": [
          "anatomicalSite"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "synovial tissue"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "anatomicalSite": {
            "enum": [
              "right 1st MTP joint",
              "right 2nd MTP joint",
              "right 2nd MCP joint",
              "right wrist joint",
              "unknown",
              "left wrist joint",
              "left hip joint",
              "left knee joint",
              "right knee joint",
              "right 3rd MCP joint",
              "right ankle joint",
              "other site",
              "right hip joint",
              "left ankle joint",
              "left 2nd MCP joint"
            ]
          }
        },
        "required": [
          "anatomicalSite"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "synovial fluid"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "anatomicalSite": {
            "enum": [
              "right 1st MTP joint",
              "right 2nd MTP joint",
              "right 2nd MCP joint",
              "right wrist joint",
              "unknown",
              "left wrist joint",
              "left hip joint",
              "left knee joint",
              "right knee joint",
              "right 3rd MCP joint",
              "right ankle joint",
              "other site",
              "right hip joint",
              "left ankle joint",
              "left 2nd MCP joint"
            ]
          }
        },
        "required": [
          "anatomicalSite"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "skin swab"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "FMAID": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "FMAID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "skin biopsy"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "FMAID": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "FMAID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "suction blister fluid"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "FMAID": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "FMAID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "suction blister cells"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "FMAID": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "FMAID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "synovial tissue"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "FMAID": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "FMAID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "synovial fluid"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "FMAID": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "FMAID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "saliva"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "salivaCollectionProcedure": {
            "enum": [
              "stimulated",
              "unstimulated"
            ]
          }
        },
        "required": [
          "salivaCollectionProcedure"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "synovial tissue"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "krennInflammatory": {}
        },
        "required": [
          "krennInflammatory"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "synovial tissue"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "krennSynovitisScore": {}
        },
        "required": [
          "krennSynovitisScore"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "synovial tissue"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "synovialCollectionProcedure": {
            "enum": [
              "arthroplasty",
              "synovectomy",
              "biopsy"
            ]
          }
        },
        "required": [
          "synovialCollectionProcedure"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "synovial fluid"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "synovialCollectionProcedure": {
            "enum": [
              "arthroplasty",
              "synovectomy",
              "biopsy"
            ]
          }
        },
        "required": [
          "synovialCollectionProcedure"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "synovial tissue"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "krennStroma": {}
        },
        "required": [
          "krennStroma"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "synovial tissue"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "krennLining": {}
        },
        "required": [
          "krennLining"
        ]
      }
    }
  ]
}