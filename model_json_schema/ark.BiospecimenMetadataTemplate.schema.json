{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://example.com/BiospecimenMetadataTemplate",
  "title": "BiospecimenMetadataTemplate",
  "type": "object",
  "properties": {
    "program": {
      "enum": [
        "AMP AIM",
        "AMP RA/SLE",
        "Community Contribution"
      ]
    },
    "biospecimenID": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "individualID": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "biospecimenType": {
      "enum": [
        "saliva",
        "stool",
        "total leukocytes",
        "salivary gland",
        "skin swab",
        "kidney biopsy",
        "none",
        "suction blister fluid",
        "uvea",
        "whole blood",
        "fibroblast-like synoviocyte",
        "suction blister cells",
        "skin biopsy",
        "urine",
        "synovial fluid",
        "plasma",
        "PBMCs",
        "serum",
        "synovial tissue"
      ]
    },
    "Component": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "project": {
      "enum": [
        "RA",
        "V-CoRT",
        "ELLIPSS",
        "SLE",
        "STAMP",
        "LOCKIT",
        "AIM for RA"
      ]
    },
    "biospecimenSubtype": {
      "enum": [
        "flow-sorted cells",
        "PFA-fixed tissue",
        "FFPE tissue",
        "frozen tissue",
        "fresh tissue",
        "nuclei suspension",
        "cell suspension",
        ""
      ]
    },
    "visitID": {},
    "parentBiospecimenID": {},
    "programPhase": {
      "enum": [
        "I",
        "II",
        ""
      ]
    },
    "salivaCollectionProcedure": {
      "enum": [
        "unstimulated",
        "stimulated",
        ""
      ]
    },
    "FMAID": {},
    "skinSiteStatus": {
      "enum": [
        "lesional proximal",
        "lesional",
        "healthy control",
        "non-lesional",
        ""
      ]
    },
    "anatomicalSite": {
      "enum": [
        "right 3rd MCP joint",
        "right 2nd MCP joint",
        "right knee joint",
        "right 1st MTP joint",
        "left knee joint",
        "right ankle joint",
        "left 2nd MCP joint",
        "left wrist joint",
        "right 2nd MTP joint",
        "right wrist joint",
        "other site",
        "unknown",
        "left ankle joint",
        "left hip joint",
        "right hip joint",
        ""
      ]
    },
    "synovialCollectionProcedure": {
      "enum": [
        "arthroplasty",
        "synovectomy",
        "biopsy",
        ""
      ]
    },
    "krennInflammatory": {},
    "krennLining": {},
    "krennStroma": {},
    "krennSynovitisScore": {},
    "cellOntologyID": {},
    "cellType": {},
    "FACSPopulation": {},
    "userDefinedCellType": {}
  },
  "required": [
    "program",
    "biospecimenID",
    "individualID",
    "biospecimenType",
    "Component",
    "project"
  ],
  "allOf": [
    {
      "if": {
        "properties": {
          "program": {
            "enum": [
              "AMP RA/SLE"
            ]
          }
        },
        "required": [
          "program"
        ]
      },
      "then": {
        "properties": {
          "programPhase": {
            "enum": [
              "I",
              "II"
            ]
          }
        },
        "required": [
          "programPhase"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "saliva"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "salivaCollectionProcedure": {
            "enum": [
              "unstimulated",
              "stimulated"
            ]
          }
        },
        "required": [
          "salivaCollectionProcedure"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "skin swab"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "FMAID": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "FMAID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "suction blister fluid"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "FMAID": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "FMAID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "suction blister cells"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "FMAID": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "FMAID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "skin biopsy"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "FMAID": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "FMAID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "synovial fluid"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "FMAID": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "FMAID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "synovial tissue"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "FMAID": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "FMAID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "skin swab"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "skinSiteStatus": {
            "enum": [
              "lesional proximal",
              "lesional",
              "healthy control",
              "non-lesional"
            ]
          }
        },
        "required": [
          "skinSiteStatus"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "suction blister fluid"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "skinSiteStatus": {
            "enum": [
              "lesional proximal",
              "lesional",
              "healthy control",
              "non-lesional"
            ]
          }
        },
        "required": [
          "skinSiteStatus"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "suction blister cells"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "skinSiteStatus": {
            "enum": [
              "lesional proximal",
              "lesional",
              "healthy control",
              "non-lesional"
            ]
          }
        },
        "required": [
          "skinSiteStatus"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "skin biopsy"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "skinSiteStatus": {
            "enum": [
              "lesional proximal",
              "lesional",
              "healthy control",
              "non-lesional"
            ]
          }
        },
        "required": [
          "skinSiteStatus"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "skin swab"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "anatomicalSite": {
            "enum": [
              "right 3rd MCP joint",
              "right 2nd MCP joint",
              "right knee joint",
              "right 1st MTP joint",
              "left knee joint",
              "right ankle joint",
              "left 2nd MCP joint",
              "left wrist joint",
              "right 2nd MTP joint",
              "right wrist joint",
              "other site",
              "unknown",
              "left ankle joint",
              "left hip joint",
              "right hip joint"
            ]
          }
        },
        "required": [
          "anatomicalSite"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "suction blister fluid"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "anatomicalSite": {
            "enum": [
              "right 3rd MCP joint",
              "right 2nd MCP joint",
              "right knee joint",
              "right 1st MTP joint",
              "left knee joint",
              "right ankle joint",
              "left 2nd MCP joint",
              "left wrist joint",
              "right 2nd MTP joint",
              "right wrist joint",
              "other site",
              "unknown",
              "left ankle joint",
              "left hip joint",
              "right hip joint"
            ]
          }
        },
        "required": [
          "anatomicalSite"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "suction blister cells"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "anatomicalSite": {
            "enum": [
              "right 3rd MCP joint",
              "right 2nd MCP joint",
              "right knee joint",
              "right 1st MTP joint",
              "left knee joint",
              "right ankle joint",
              "left 2nd MCP joint",
              "left wrist joint",
              "right 2nd MTP joint",
              "right wrist joint",
              "other site",
              "unknown",
              "left ankle joint",
              "left hip joint",
              "right hip joint"
            ]
          }
        },
        "required": [
          "anatomicalSite"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "skin biopsy"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "anatomicalSite": {
            "enum": [
              "right 3rd MCP joint",
              "right 2nd MCP joint",
              "right knee joint",
              "right 1st MTP joint",
              "left knee joint",
              "right ankle joint",
              "left 2nd MCP joint",
              "left wrist joint",
              "right 2nd MTP joint",
              "right wrist joint",
              "other site",
              "unknown",
              "left ankle joint",
              "left hip joint",
              "right hip joint"
            ]
          }
        },
        "required": [
          "anatomicalSite"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "synovial fluid"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "anatomicalSite": {
            "enum": [
              "right 3rd MCP joint",
              "right 2nd MCP joint",
              "right knee joint",
              "right 1st MTP joint",
              "left knee joint",
              "right ankle joint",
              "left 2nd MCP joint",
              "left wrist joint",
              "right 2nd MTP joint",
              "right wrist joint",
              "other site",
              "unknown",
              "left ankle joint",
              "left hip joint",
              "right hip joint"
            ]
          }
        },
        "required": [
          "anatomicalSite"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "synovial tissue"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "anatomicalSite": {
            "enum": [
              "right 3rd MCP joint",
              "right 2nd MCP joint",
              "right knee joint",
              "right 1st MTP joint",
              "left knee joint",
              "right ankle joint",
              "left 2nd MCP joint",
              "left wrist joint",
              "right 2nd MTP joint",
              "right wrist joint",
              "other site",
              "unknown",
              "left ankle joint",
              "left hip joint",
              "right hip joint"
            ]
          }
        },
        "required": [
          "anatomicalSite"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "synovial fluid"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "synovialCollectionProcedure": {
            "enum": [
              "arthroplasty",
              "synovectomy",
              "biopsy"
            ]
          }
        },
        "required": [
          "synovialCollectionProcedure"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "synovial tissue"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "synovialCollectionProcedure": {
            "enum": [
              "arthroplasty",
              "synovectomy",
              "biopsy"
            ]
          }
        },
        "required": [
          "synovialCollectionProcedure"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "synovial tissue"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "krennInflammatory": {}
        },
        "required": [
          "krennInflammatory"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "synovial tissue"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "krennLining": {}
        },
        "required": [
          "krennLining"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "synovial tissue"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "krennStroma": {}
        },
        "required": [
          "krennStroma"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenType": {
            "enum": [
              "synovial tissue"
            ]
          }
        },
        "required": [
          "biospecimenType"
        ]
      },
      "then": {
        "properties": {
          "krennSynovitisScore": {}
        },
        "required": [
          "krennSynovitisScore"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenSubtype": {
            "enum": [
              "flow-sorted cells"
            ]
          }
        },
        "required": [
          "biospecimenSubtype"
        ]
      },
      "then": {
        "properties": {
          "cellOntologyID": {}
        },
        "required": [
          "cellOntologyID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenSubtype": {
            "enum": [
              "cell suspension"
            ]
          }
        },
        "required": [
          "biospecimenSubtype"
        ]
      },
      "then": {
        "properties": {
          "cellOntologyID": {}
        },
        "required": [
          "cellOntologyID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenSubtype": {
            "enum": [
              "flow-sorted cells"
            ]
          }
        },
        "required": [
          "biospecimenSubtype"
        ]
      },
      "then": {
        "properties": {
          "cellType": {}
        },
        "required": [
          "cellType"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenSubtype": {
            "enum": [
              "cell suspension"
            ]
          }
        },
        "required": [
          "biospecimenSubtype"
        ]
      },
      "then": {
        "properties": {
          "cellType": {}
        },
        "required": [
          "cellType"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenSubtype": {
            "enum": [
              "flow-sorted cells"
            ]
          }
        },
        "required": [
          "biospecimenSubtype"
        ]
      },
      "then": {
        "properties": {
          "FACSPopulation": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "FACSPopulation"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenSubtype": {
            "enum": [
              "flow-sorted cells"
            ]
          }
        },
        "required": [
          "biospecimenSubtype"
        ]
      },
      "then": {
        "properties": {
          "userDefinedCellType": {}
        },
        "required": [
          "userDefinedCellType"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "biospecimenSubtype": {
            "enum": [
              "cell suspension"
            ]
          }
        },
        "required": [
          "biospecimenSubtype"
        ]
      },
      "then": {
        "properties": {
          "userDefinedCellType": {}
        },
        "required": [
          "userDefinedCellType"
        ]
      }
    }
  ]
}