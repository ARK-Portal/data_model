{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://example.com/example",
  "title": "example",
  "type": "object",
  "properties": {
    "percentCellViability": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "sequencingSaturation": {},
    "program": {
      "enum": [
        "Community Contribution",
        "AMP AIM",
        "AMP RA/SLE"
      ]
    },
    "sampleProcessingBatch": {},
    "dataCollectionBatch": {},
    "specimenModality": {
      "enum": [
        "multispecimen",
        "single specimen"
      ]
    },
    "assay": {
      "type": "array",
      "items": {
        "enum": [
          "H&E",
          "multiplexed ELISA",
          "imaging mass cytometry",
          "scRNASeq",
          "LC-MS/MS",
          "Xenium",
          "WES",
          "snRNASeq",
          "CITESeq",
          "NULISA",
          "feature barcode sequencing",
          "scVDJSeq",
          "CE-MS",
          "flow cytometry",
          "SNP array",
          "SomaScan",
          "snATACSeq",
          "imaging mass spectrometry",
          "CosMX",
          "RNASeq",
          "VDJSeq",
          "ASAPSeq",
          "WGS",
          "Olink Explore HT",
          "serial IHC",
          "CyTOF"
        ]
      },
      "maxItems": 26
    },
    "libraryPrepMethod": {
      "enum": [
        "custom DASH-treatment",
        "10x GEM-X Universal 5? Gene Expression v3",
        "Takara Human BCR profiling for Illumina",
        "10x Chromium Next GEM Single Cell ATAC v2",
        "SMART-Seq Human BCR with UMI",
        "QIAseq miRNA Library",
        "SMARTer Stranded Total RNA v2",
        "Takara Human TCR profiling for Illumina",
        "10x GEM-X Flex Gene Expression Human",
        "10x Chromium GEM-X Single Cell 3' v4",
        "CEL-Seq2",
        "10x Chromium Single Cell Human BCR",
        "10x Chromium Next GEM Single Cell 5' v1.1",
        "10x Chromium Single Cell Human TCR",
        "10x Chromium Next GEM Single Cell 5' v2",
        "10x Chromium Fixed RNA Human Transcriptome",
        "10x Chromium GEM-X Single Cell 5' v3",
        "10x Chromium Next GEM Single Cell 3' 3.1",
        "Takara Human TCRv2 profiling for Illumina",
        "10x Chromium Next GEM Single Cell 3'",
        "in-house library prep",
        "NEBNext Human Immune Sequencing Kit",
        "TruSeq Stranded mRNA",
        "Fluidigm C1 HT",
        "Nextera XT DNA",
        "SMART-Seq Human TCR with UMI",
        "Chromium Next GEM Single Cell ATAC v1.1",
        "SMART-Seq v4 Ultra Low Input RNA",
        "Takara Human scTCR profiling for Illumina",
        "NEBNext Ultra II Directional RNA Library",
        "Nextera XT"
      ]
    },
    "nucleicAcidSource": {
      "type": "array",
      "items": {
        "enum": [
          "multiplexing oligo",
          "TCR mRNA",
          "surface protein feature barcode",
          "poly(A) RNA",
          "rRNA-depleted RNA",
          "intracellular protein feature barcode",
          "CRISPR protospacer feature barcode",
          "Tn5-accessible gDNA",
          "BCR mRNA",
          "globin-depleted RNA",
          "gDNA",
          "antigen capture barcode"
        ]
      },
      "maxItems": 12
    },
    "Component": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "biospecimenID": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "platform": {
      "type": "array",
      "items": {
        "enum": [
          "Hyperion",
          "GEM-X OCM 5' Chip",
          "Chromium Xo",
          "none",
          "Chromium iX",
          "Chromium X",
          "Chromium Next GEM Chip K",
          "Chromium Next GEM Chip H",
          "Helios Mass Cytometer",
          "Chromium Next GEM Chip G",
          "Xenium",
          "Illumina HiSeq 2500",
          "Chromium GEM-X Single Cell 3' Chip v4",
          "Illumina NovaSeq 6000",
          "CyTOF XT",
          "Visium CytAssist",
          "GEM-X Flex Gene Expression Chip",
          "Chromium Next GEM Chip Q",
          "Illumina NovaSeq X",
          "Chromium Controller",
          "BD FACSAria Fusion cell sorter",
          "Illumina NextSeq 500",
          "Chromium Next GEM Chip M",
          "Illumina HiSeq X Ten",
          ""
        ]
      },
      "maxItems": 24
    },
    "project": {
      "enum": [
        "STAMP",
        "ELLIPSS",
        "LOCKIT",
        "SLE",
        "AIM for RA",
        "RA",
        "V-CoRT"
      ]
    },
    "inputCellCount": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "libraryID": {},
    "totalReads": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "programPhase": {
      "enum": [
        "II",
        "I",
        ""
      ]
    },
    "10xProbeSetReference": {
      "enum": [
        "custom probe set",
        "Visium Human Transcriptome v1",
        "Flex Human Transcriptome Probe Set v1.1.0",
        "Flex Human Transcriptome Probe Set v1.0.1",
        "Visium Human Transcriptome v2",
        ""
      ]
    }
  },
  "required": [
    "percentCellViability",
    "program",
    "specimenModality",
    "assay",
    "libraryPrepMethod",
    "nucleicAcidSource",
    "Component",
    "biospecimenID",
    "project",
    "inputCellCount",
    "totalReads"
  ],
  "allOf": [
    {
      "if": {
        "properties": {
          "program": {
            "enum": [
              "AMP RA/SLE"
            ]
          }
        },
        "required": [
          "program"
        ]
      },
      "then": {
        "properties": {
          "programPhase": {
            "enum": [
              "II",
              "I"
            ]
          }
        },
        "required": [
          "programPhase"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "libraryPrepMethod": {
            "enum": [
              "10x GEM-X Flex Gene Expression Human"
            ]
          }
        },
        "required": [
          "libraryPrepMethod"
        ]
      },
      "then": {
        "properties": {
          "10xProbeSetReference": {
            "enum": [
              "custom probe set",
              "Visium Human Transcriptome v1",
              "Flex Human Transcriptome Probe Set v1.1.0",
              "Flex Human Transcriptome Probe Set v1.0.1",
              "Visium Human Transcriptome v2"
            ]
          }
        },
        "required": [
          "10xProbeSetReference"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "libraryPrepMethod": {
            "enum": [
              "10x Chromium Fixed RNA Human Transcriptome"
            ]
          }
        },
        "required": [
          "libraryPrepMethod"
        ]
      },
      "then": {
        "properties": {
          "10xProbeSetReference": {
            "enum": [
              "custom probe set",
              "Visium Human Transcriptome v1",
              "Flex Human Transcriptome Probe Set v1.1.0",
              "Flex Human Transcriptome Probe Set v1.0.1",
              "Visium Human Transcriptome v2"
            ]
          }
        },
        "required": [
          "10xProbeSetReference"
        ]
      }
    }
  ]
}