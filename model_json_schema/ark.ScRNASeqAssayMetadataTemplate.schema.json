{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://example.com/ark",
  "title": "ark",
  "type": "object",
  "properties": {
    "totalReads": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "sampleProcessingBatch": {},
    "softwareAndVersion": {
      "enum": [
        "Cell Ranger v7.2.0",
        "Cell Ranger 9.0.1",
        "Cell Ranger v4.0.0",
        "Cell Ranger v8.0.0",
        "Cell Ranger ATAC v1.1.0",
        "Cell Ranger v6.1.1",
        "Cell Ranger v7.1.0",
        "Cell Ranger v6.0.0",
        "Cell Ranger v3.0.1",
        "Cell Ranger v7.0.0",
        "Cell Ranger v6.1.0",
        "Space Ranger 3.0.1",
        "Cell Ranger v8.0.1",
        "Cell Ranger v5.0.0",
        "Space Ranger 3.1.3",
        "Space Ranger 3.1.2",
        "Space Ranger 3.0.0",
        "demuxlet",
        "Cell Ranger v6.1.2",
        "Cell Ranger v5.0.1",
        "Cell Ranger v6.0.2",
        "Cell Ranger v9.0.0",
        "Space Ranger 3.1.0",
        "Cell Ranger v6.0.1",
        "Cell Ranger v3.0.2",
        "Cell Ranger v7.0.1",
        "Cell Ranger v3.1.0",
        "BD FACSDiva 8.0.1",
        "Cell Ranger v3.0.0",
        "Space Ranger 3.1.1",
        ""
      ]
    },
    "assay": {
      "type": "array",
      "items": {
        "enum": [
          "VDJSeq",
          "snRNASeq",
          "Olink Reveal",
          "imaging mass spectrometry",
          "flow cytometry",
          "ASAPSeq",
          "SNP array",
          "CyTOF",
          "Olink Focus",
          "CE-MS",
          "SomaScan",
          "WES",
          "scVDJSeq",
          "serial IHC",
          "Olink Flex",
          "CITESeq",
          "Olink Explore HT",
          "multiplexed ELISA",
          "scRNASeq",
          "Olink Target 48",
          "NULISA",
          "LC-MS/MS",
          "CosMX",
          "Xenium",
          "snATACSeq",
          "imaging mass cytometry",
          "WGS",
          "RNASeq",
          "Olink Target 96",
          "feature barcode sequencing",
          "H&E",
          "kiloplex"
        ]
      },
      "maxItems": 32
    },
    "percentCellViability": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "nucleicAcidSource": {
      "type": "array",
      "items": {
        "enum": [
          "globin-depleted RNA",
          "antigen capture barcode",
          "intracellular protein feature barcode",
          "rRNA-depleted RNA",
          "multiplexing oligo",
          "Tn5-accessible gDNA",
          "TCR mRNA",
          "BCR mRNA",
          "gDNA",
          "CRISPR protospacer feature barcode",
          "poly(A) RNA",
          "surface protein feature barcode"
        ]
      },
      "maxItems": 12
    },
    "libraryPrepMethod": {
      "enum": [
        "Nextera XT DNA",
        "10x Chromium Next GEM Single Cell 5' v2",
        "10x Chromium Next GEM Single Cell ATAC v2",
        "Takara Human TCR profiling for Illumina",
        "SMART-Seq Human BCR with UMI",
        "CEL-Seq2",
        "10x Chromium Next GEM Single Cell 3' 3.1",
        "10x GEM-X Universal 5? Gene Expression v3",
        "Takara Human BCR profiling for Illumina",
        "SMART-Seq Human TCR with UMI",
        "10x Chromium Next GEM Single Cell 5' v1.1",
        "NEBNext Ultra II Directional RNA Library",
        "Chromium Next GEM Single Cell ATAC v1.1",
        "10x Chromium GEM-X Single Cell 5' v3",
        "Takara Human scTCR profiling for Illumina",
        "QIAseq miRNA Library",
        "TruSeq Stranded mRNA",
        "Nextera XT",
        "custom DASH-treatment",
        "in-house library prep",
        "10x Chromium Single Cell Human TCR",
        "Takara Human TCRv2 profiling for Illumina",
        "Fluidigm C1 HT",
        "NEBNext Human Immune Sequencing Kit",
        "10x Chromium Fixed RNA Human Transcriptome",
        "SMARTer Stranded Total RNA v2",
        "10x Chromium GEM-X Single Cell 3' v4",
        "SMART-Seq v4 Ultra Low Input RNA",
        "10x Chromium Single Cell Human BCR",
        "10x GEM-X Flex Gene Expression Human",
        "10x Chromium Next GEM Single Cell 3'"
      ]
    },
    "Component": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "sequencingSaturation": {},
    "inputCellCount": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "dataCollectionBatch": {},
    "alignmentReference": {
      "enum": [
        "unknown",
        "10x Cell Ranger Human GRCh38 2020-A",
        "10x Cell Ranger Human GRCh38 2024-A",
        "vdj_GRCh38_alts_ensembl-4.0.0"
      ]
    },
    "specimenModality": {
      "enum": [
        "multispecimen",
        "single specimen"
      ]
    },
    "platform": {
      "type": "array",
      "items": {
        "enum": [
          "Chromium Next GEM Chip M",
          "Chromium Xo",
          "Illumina HiSeq 2500",
          "BD FACSAria Fusion cell sorter",
          "GEM-X OCM 5' Chip",
          "Thermo Fisher Attune CytPix",
          "Illumina NovaSeq 6000",
          "unknown",
          "GEM-X Flex Gene Expression Chip",
          "Thermo Fisher Attune NxT",
          "Helios Mass Cytometer",
          "Sony MA900",
          "BD FACSDiscover A8",
          "Chromium iX",
          "BD LSRFortessa",
          "Chromium Next GEM Chip Q",
          "Chromium X",
          "BD FACSDiscover S8",
          "none",
          "Illumina NextSeq 500",
          "Hyperion",
          "Not Applicable",
          "BD FACSCanto II",
          "BD FACSCanto",
          "BD FACSMelody",
          "BD FACSAria III",
          "Chromium GEM-X Single Cell 3' Chip v4",
          "Olink Signature Q100",
          "CyTOF XT",
          "Thermo Fisher Attune Xenith",
          "Cytek Aurora Evo",
          "Chromium Controller",
          "Illumina NovaSeq X",
          "Chromium Next GEM Chip K",
          "Chromium Next GEM Chip H",
          "Xenium",
          "BD FACSymphony S6",
          "BD FACSLyric Clinical",
          "Chromium Next GEM Chip G",
          "Cytek Aurora",
          "Visium CytAssist",
          "Illumina HiSeq X Ten",
          "Fluidigm BioMark"
        ]
      },
      "maxItems": 43
    },
    "10xProbeSetReference": {
      "enum": [
        "Flex Human Transcriptome Probe Set v1.0.1",
        "Flex Human Transcriptome Probe Set v1.1.0",
        "custom probe set",
        "Visium Human Transcriptome v2",
        "Visium Human Transcriptome v1",
        ""
      ]
    },
    "libraryID": {},
    "biospecimenID": {}
  },
  "required": [
    "totalReads",
    "assay",
    "percentCellViability",
    "nucleicAcidSource",
    "libraryPrepMethod",
    "Component",
    "inputCellCount",
    "alignmentReference",
    "specimenModality",
    "platform"
  ],
  "allOf": [
    {
      "if": {
        "properties": {
          "libraryPrepMethod": {
            "enum": [
              "10x GEM-X Flex Gene Expression Human"
            ]
          }
        },
        "required": [
          "libraryPrepMethod"
        ]
      },
      "then": {
        "properties": {
          "10xProbeSetReference": {
            "enum": [
              "Flex Human Transcriptome Probe Set v1.0.1",
              "Flex Human Transcriptome Probe Set v1.1.0",
              "custom probe set",
              "Visium Human Transcriptome v2",
              "Visium Human Transcriptome v1"
            ]
          }
        },
        "required": [
          "10xProbeSetReference"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "specimenModality": {
            "enum": [
              "multispecimen"
            ]
          }
        },
        "required": [
          "specimenModality"
        ]
      },
      "then": {
        "properties": {
          "libraryID": {}
        },
        "required": [
          "libraryID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "specimenModality": {
            "enum": [
              "single specimen"
            ]
          }
        },
        "required": [
          "specimenModality"
        ]
      },
      "then": {
        "properties": {
          "biospecimenID": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "biospecimenID"
        ]
      }
    }
  ]
}