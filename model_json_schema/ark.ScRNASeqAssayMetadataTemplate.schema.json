{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://example.com/ScRNASeqAssayMetadataTemplate",
  "title": "ScRNASeqAssayMetadataTemplate",
  "type": "object",
  "properties": {
    "Component": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "platform": {
      "type": "array",
      "items": {
        "enum": [
          "Illumina HiSeq X Ten",
          "Chromium iX",
          "Chromium Next GEM Chip Q",
          "GEM-X Flex Gene Expression Chip",
          "Chromium X",
          "Chromium Next GEM Chip G",
          "Chromium Xo",
          "Helios Mass Cytometer",
          "CyTOF XT",
          "Visium CytAssist",
          "Xenium",
          "Chromium Next GEM Chip K",
          "Chromium Next GEM Chip H",
          "Hyperion",
          "Illumina NovaSeq 6000",
          "none",
          "Illumina NextSeq 500",
          "Chromium GEM-X Single Cell 3' Chip v4",
          "Illumina NovaSeq X",
          "GEM-X OCM 5' Chip",
          "Illumina HiSeq 2500",
          "BD FACSAria Fusion cell sorter",
          "Chromium Controller",
          "Chromium Next GEM Chip M",
          ""
        ]
      },
      "maxItems": 24
    },
    "inputCellCount": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "program": {
      "enum": [
        "Community Contribution",
        "AMP RA/SLE",
        "AMP AIM"
      ]
    },
    "assay": {
      "type": "array",
      "items": {
        "enum": [
          "scVDJSeq",
          "serial IHC",
          "RNASeq",
          "flow cytometry",
          "SomaScan",
          "WES",
          "H&E",
          "ASAPSeq",
          "feature barcode sequencing",
          "LC-MS/MS",
          "SNP array",
          "multiplexed ELISA",
          "CE-MS",
          "Xenium",
          "snATACSeq",
          "CITESeq",
          "Olink Explore HT",
          "snRNASeq",
          "NULISA",
          "imaging mass spectrometry",
          "WGS",
          "CosMX",
          "CyTOF",
          "scRNASeq",
          "imaging mass cytometry",
          "VDJSeq"
        ]
      },
      "maxItems": 26
    },
    "sampleProcessingBatch": {},
    "libraryID": {},
    "sequencingSaturation": {},
    "nucleicAcidSource": {
      "type": "array",
      "items": {
        "enum": [
          "CRISPR protospacer feature barcode",
          "multiplexing oligo",
          "rRNA-depleted RNA",
          "antigen capture barcode",
          "surface protein feature barcode",
          "gDNA",
          "BCR mRNA",
          "globin-depleted RNA",
          "poly(A) RNA",
          "TCR mRNA",
          "Tn5-accessible gDNA",
          "intracellular protein feature barcode"
        ]
      },
      "maxItems": 12
    },
    "dataCollectionBatch": {},
    "percentCellViability": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "totalReads": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "libraryPrepMethod": {
      "enum": [
        "SMART-Seq v4 Ultra Low Input RNA",
        "10x Chromium Next GEM Single Cell ATAC v2",
        "NEBNext Ultra II Directional RNA Library",
        "Takara Human BCR profiling for Illumina",
        "10x Chromium GEM-X Single Cell 3' v4",
        "Takara Human TCRv2 profiling for Illumina",
        "10x Chromium Single Cell Human BCR",
        "10x Chromium Fixed RNA Human Transcriptome",
        "TruSeq Stranded mRNA",
        "10x Chromium Single Cell Human TCR",
        "Takara Human scTCR profiling for Illumina",
        "10x GEM-X Flex Gene Expression Human",
        "Nextera XT DNA",
        "Nextera XT",
        "in-house library prep",
        "Takara Human TCR profiling for Illumina",
        "CEL-Seq2",
        "NEBNext Human Immune Sequencing Kit",
        "10x Chromium Next GEM Single Cell 5' v2",
        "Chromium Next GEM Single Cell ATAC v1.1",
        "10x GEM-X Universal 5\u2019 Gene Expression v3",
        "10x Chromium GEM-X Single Cell 5' v3",
        "SMARTer Stranded Total RNA v2",
        "10x Chromium Next GEM Single Cell 3'",
        "Fluidigm C1 HT",
        "10x Chromium Next GEM Single Cell 3' 3.1",
        "QIAseq miRNA Library",
        "custom DASH-treatment",
        "SMART-Seq Human TCR with UMI",
        "10x Chromium Next GEM Single Cell 5' v1.1",
        "SMART-Seq Human BCR with UMI"
      ]
    },
    "specimenModality": {
      "enum": [
        "single specimen",
        "multispecimen"
      ]
    },
    "project": {
      "enum": [
        "AIM for RA",
        "STAMP",
        "ELLIPSS",
        "V-CoRT",
        "SLE",
        "RA",
        "LOCKIT"
      ]
    },
    "biospecimenID": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "programPhase": {
      "enum": [
        "II",
        "I",
        ""
      ]
    },
    "10xProbeSetReference": {
      "enum": [
        "Visium Human Transcriptome v2",
        "Flex Human Transcriptome Probe Set v1.0.1",
        "custom probe set",
        "Visium Human Transcriptome v1",
        "Flex Human Transcriptome Probe Set v1.1.0",
        ""
      ]
    },
    "custom10xProbeSetSynID": {}
  },
  "required": [
    "Component",
    "inputCellCount",
    "program",
    "assay",
    "nucleicAcidSource",
    "percentCellViability",
    "totalReads",
    "libraryPrepMethod",
    "specimenModality",
    "project",
    "biospecimenID"
  ],
  "allOf": [
    {
      "if": {
        "properties": {
          "program": {
            "enum": [
              "AMP RA/SLE"
            ]
          }
        },
        "required": [
          "program"
        ]
      },
      "then": {
        "properties": {
          "programPhase": {
            "enum": [
              "II",
              "I"
            ]
          }
        },
        "required": [
          "programPhase"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "libraryPrepMethod": {
            "enum": [
              "10x Chromium Fixed RNA Human Transcriptome"
            ]
          }
        },
        "required": [
          "libraryPrepMethod"
        ]
      },
      "then": {
        "properties": {
          "10xProbeSetReference": {
            "enum": [
              "Visium Human Transcriptome v2",
              "Flex Human Transcriptome Probe Set v1.0.1",
              "custom probe set",
              "Visium Human Transcriptome v1",
              "Flex Human Transcriptome Probe Set v1.1.0"
            ]
          }
        },
        "required": [
          "10xProbeSetReference"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "libraryPrepMethod": {
            "enum": [
              "10x GEM-X Flex Gene Expression Human"
            ]
          }
        },
        "required": [
          "libraryPrepMethod"
        ]
      },
      "then": {
        "properties": {
          "10xProbeSetReference": {
            "enum": [
              "Visium Human Transcriptome v2",
              "Flex Human Transcriptome Probe Set v1.0.1",
              "custom probe set",
              "Visium Human Transcriptome v1",
              "Flex Human Transcriptome Probe Set v1.1.0"
            ]
          }
        },
        "required": [
          "10xProbeSetReference"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "10xProbeSetReference": {
            "enum": [
              "custom probe set"
            ]
          }
        },
        "required": [
          "10xProbeSetReference"
        ]
      },
      "then": {
        "properties": {
          "custom10xProbeSetSynID": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "custom10xProbeSetSynID"
        ]
      }
    }
  ]
}