{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://example.com/ark",
  "title": "ark",
  "type": "object",
  "properties": {
    "inputCellCount": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "dataCollectionBatch": {},
    "program": {
      "enum": [
        "Community Contribution",
        "AMP RA/SLE",
        "AMP AIM"
      ]
    },
    "project": {
      "enum": [
        "AIM for RA",
        "SLE",
        "V-CoRT",
        "STAMP",
        "ELLIPSS",
        "RA",
        "LOCKIT"
      ]
    },
    "nucleicAcidSource": {
      "type": "array",
      "items": {
        "enum": [
          "intracellular protein feature barcode",
          "surface protein feature barcode",
          "antigen capture barcode",
          "CRISPR protospacer feature barcode",
          "globin-depleted RNA",
          "rRNA-depleted RNA",
          "poly(A) RNA",
          "Tn5-accessible gDNA",
          "TCR mRNA",
          "multiplexing oligo",
          "BCR mRNA",
          "gDNA"
        ]
      },
      "maxItems": 12
    },
    "sequencingSaturation": {},
    "sampleProcessingBatch": {},
    "alignmentReference": {
      "enum": [
        "10x Cell Ranger Human GRCh38 2020-A",
        "unknown",
        "vdj_GRCh38_alts_ensembl-4.0.0",
        "10x Cell Ranger Human GRCh38 2024-A"
      ]
    },
    "softwareAndVersion": {
      "enum": [
        "Cell Ranger v8.0.0",
        "Cell Ranger v6.1.1",
        "Cell Ranger v3.0.0",
        "BD FACSDiva 8.0.1",
        "Cell Ranger v6.0.1",
        "demuxlet",
        "Cell Ranger v9.0.0",
        "Cell Ranger v6.0.2",
        "Cell Ranger v7.0.1",
        "Cell Ranger v5.0.1",
        "Cell Ranger 9.0.1",
        "Cell Ranger v6.1.0",
        "Cell Ranger v7.0.0",
        "Space Ranger 3.0.0",
        "Cell Ranger v8.0.1",
        "Cell Ranger v6.1.2",
        "Cell Ranger v3.1.0",
        "Cell Ranger v4.0.0",
        "Cell Ranger v7.1.0",
        "Cell Ranger ATAC v1.1.0",
        "Space Ranger 3.1.3",
        "Cell Ranger v7.2.0",
        "Space Ranger 3.0.1",
        "Cell Ranger v6.0.0",
        "Cell Ranger v3.0.1",
        "Space Ranger 3.1.2",
        "Cell Ranger v3.0.2",
        "Cell Ranger v5.0.0",
        "Space Ranger 3.1.0",
        "Space Ranger 3.1.1",
        ""
      ]
    },
    "assay": {
      "type": "array",
      "items": {
        "enum": [
          "SNP array",
          "imaging mass spectrometry",
          "snATACSeq",
          "serial IHC",
          "RNASeq",
          "Xenium",
          "LC-MS/MS",
          "CE-MS",
          "SomaScan",
          "feature barcode sequencing",
          "scRNASeq",
          "ASAPSeq",
          "flow cytometry",
          "CosMX",
          "NULISA",
          "imaging mass cytometry",
          "CITESeq",
          "multiplexed ELISA",
          "Olink Target 48",
          "Olink Target 96",
          "WGS",
          "Olink Reveal",
          "snRNASeq",
          "Olink Flex",
          "CyTOF",
          "scVDJSeq",
          "Olink Focus",
          "WES",
          "H&E",
          "Olink Explore HT",
          "VDJSeq"
        ]
      },
      "maxItems": 31
    },
    "Component": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "libraryPrepMethod": {
      "enum": [
        "Takara Human TCRv2 profiling for Illumina",
        "Takara Human BCR profiling for Illumina",
        "Nextera XT DNA",
        "10x Chromium Next GEM Single Cell 5' v2",
        "Chromium Next GEM Single Cell ATAC v1.1",
        "10x GEM-X Flex Gene Expression Human",
        "10x Chromium Next GEM Single Cell 5' v1.1",
        "10x Chromium GEM-X Single Cell 3' v4",
        "Takara Human scTCR profiling for Illumina",
        "10x Chromium Next GEM Single Cell 3' 3.1",
        "Nextera XT",
        "CEL-Seq2",
        "in-house library prep",
        "10x GEM-X Universal 5? Gene Expression v3",
        "NEBNext Ultra II Directional RNA Library",
        "10x Chromium Single Cell Human BCR",
        "SMART-Seq Human TCR with UMI",
        "10x Chromium Next GEM Single Cell 3'",
        "SMARTer Stranded Total RNA v2",
        "SMART-Seq Human BCR with UMI",
        "NEBNext Human Immune Sequencing Kit",
        "10x Chromium GEM-X Single Cell 5' v3",
        "QIAseq miRNA Library",
        "Takara Human TCR profiling for Illumina",
        "custom DASH-treatment",
        "TruSeq Stranded mRNA",
        "10x Chromium Next GEM Single Cell ATAC v2",
        "10x Chromium Fixed RNA Human Transcriptome",
        "SMART-Seq v4 Ultra Low Input RNA",
        "10x Chromium Single Cell Human TCR",
        "Fluidigm C1 HT"
      ]
    },
    "totalReads": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "percentCellViability": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "specimenModality": {
      "enum": [
        "single specimen",
        "multispecimen"
      ]
    },
    "platform": {
      "type": "array",
      "items": {
        "enum": [
          "BD FACSDiscover S8",
          "Chromium Next GEM Chip G",
          "Chromium Next GEM Chip H",
          "BD LSRFortessa",
          "BD FACSymphony S6",
          "Cytek Aurora Evo",
          "Thermo Fisher Attune CytPix",
          "Chromium iX",
          "Illumina HiSeq X Ten",
          "Chromium X",
          "Olink Signature Q100",
          "Xenium",
          "BD FACSAria Fusion cell sorter",
          "Chromium Next GEM Chip Q",
          "Not Applicable",
          "BD FACSCanto",
          "Chromium Next GEM Chip K",
          "Thermo Fisher Attune Xenith",
          "CyTOF XT",
          "BD FACSLyric Clinical",
          "Illumina NextSeq 500",
          "BD FACSCanto II",
          "Helios Mass Cytometer",
          "Chromium GEM-X Single Cell 3' Chip v4",
          "Cytek Aurora",
          "GEM-X OCM 5' Chip",
          "BD FACSDiscover A8",
          "Hyperion",
          "Visium CytAssist",
          "GEM-X Flex Gene Expression Chip",
          "Chromium Next GEM Chip M",
          "Fluidigm BioMark",
          "Thermo Fisher Attune NxT",
          "Illumina NovaSeq X",
          "Chromium Xo",
          "Chromium Controller",
          "unknown",
          "Sony MA900",
          "none",
          "BD FACSMelody",
          "BD FACSAria III",
          "Illumina NovaSeq 6000",
          "Illumina HiSeq 2500"
        ]
      },
      "maxItems": 43
    },
    "programPhase": {
      "enum": [
        "II",
        "I",
        ""
      ]
    },
    "10xProbeSetReference": {
      "enum": [
        "Visium Human Transcriptome v2",
        "Flex Human Transcriptome Probe Set v1.1.0",
        "custom probe set",
        "Visium Human Transcriptome v1",
        "Flex Human Transcriptome Probe Set v1.0.1",
        ""
      ]
    },
    "biospecimenID": {},
    "libraryID": {}
  },
  "required": [
    "inputCellCount",
    "program",
    "project",
    "nucleicAcidSource",
    "alignmentReference",
    "assay",
    "Component",
    "libraryPrepMethod",
    "totalReads",
    "percentCellViability",
    "specimenModality",
    "platform"
  ],
  "allOf": [
    {
      "if": {
        "properties": {
          "program": {
            "enum": [
              "AMP RA/SLE"
            ]
          }
        },
        "required": [
          "program"
        ]
      },
      "then": {
        "properties": {
          "programPhase": {
            "enum": [
              "II",
              "I"
            ]
          }
        },
        "required": [
          "programPhase"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "libraryPrepMethod": {
            "enum": [
              "10x GEM-X Flex Gene Expression Human"
            ]
          }
        },
        "required": [
          "libraryPrepMethod"
        ]
      },
      "then": {
        "properties": {
          "10xProbeSetReference": {
            "enum": [
              "Visium Human Transcriptome v2",
              "Flex Human Transcriptome Probe Set v1.1.0",
              "custom probe set",
              "Visium Human Transcriptome v1",
              "Flex Human Transcriptome Probe Set v1.0.1"
            ]
          }
        },
        "required": [
          "10xProbeSetReference"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "specimenModality": {
            "enum": [
              "single specimen"
            ]
          }
        },
        "required": [
          "specimenModality"
        ]
      },
      "then": {
        "properties": {
          "biospecimenID": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "biospecimenID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "specimenModality": {
            "enum": [
              "multispecimen"
            ]
          }
        },
        "required": [
          "specimenModality"
        ]
      },
      "then": {
        "properties": {
          "libraryID": {}
        },
        "required": [
          "libraryID"
        ]
      }
    }
  ]
}