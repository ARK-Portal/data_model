{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://example.com/ark",
  "title": "ark",
  "type": "object",
  "properties": {
    "dataCollectionBatch": {},
    "libraryPrepMethod": {
      "enum": [
        "Takara Human scTCR profiling for Illumina",
        "SMARTer Stranded Total RNA v2",
        "10x Chromium Single Cell Human BCR",
        "10x GEM-X Flex Gene Expression Human",
        "Takara Human BCR profiling for Illumina",
        "QIAseq miRNA Library",
        "10x GEM-X Universal 5? Gene Expression v3",
        "TruSeq Stranded mRNA",
        "10x Chromium Next GEM Single Cell 3'",
        "in-house library prep",
        "Fluidigm C1 HT",
        "Takara Human TCR profiling for Illumina",
        "SMART-Seq v4 Ultra Low Input RNA",
        "Nextera XT DNA",
        "SMART-Seq Human BCR with UMI",
        "10x Chromium GEM-X Single Cell 3' v4",
        "10x Chromium GEM-X Single Cell 5' v3",
        "Chromium Next GEM Single Cell ATAC v1.1",
        "Takara Human TCRv2 profiling for Illumina",
        "custom DASH-treatment",
        "10x Chromium Next GEM Single Cell 5' v2",
        "10x Chromium Fixed RNA Human Transcriptome",
        "SMART-Seq Human TCR with UMI",
        "Nextera XT",
        "NEBNext Human Immune Sequencing Kit",
        "10x Chromium Next GEM Single Cell ATAC v2",
        "10x Chromium Single Cell Human TCR",
        "10x Chromium Next GEM Single Cell 3' 3.1",
        "CEL-Seq2",
        "10x Chromium Next GEM Single Cell 5' v1.1",
        "NEBNext Ultra II Directional RNA Library"
      ]
    },
    "percentCellViability": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "sequencingSaturation": {},
    "assay": {
      "type": "array",
      "items": {
        "enum": [
          "CyTOF",
          "snRNASeq",
          "NULISA",
          "multiplexed ELISA",
          "ASAPSeq",
          "flow cytometry",
          "Olink Explore HT",
          "WES",
          "imaging mass spectrometry",
          "scVDJSeq",
          "snATACSeq",
          "CE-MS",
          "Olink Focus",
          "scRNASeq",
          "Olink Reveal",
          "SomaScan",
          "LC-MS/MS",
          "CosMX",
          "Olink Target 96",
          "Olink Target 48",
          "RNASeq",
          "feature barcode sequencing",
          "SNP array",
          "Olink Flex",
          "kiloplex",
          "H&E",
          "VDJSeq",
          "serial IHC",
          "imaging mass cytometry",
          "Xenium",
          "CITESeq",
          "WGS"
        ]
      },
      "maxItems": 32
    },
    "Component": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "totalReads": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "alignmentReference": {
      "enum": [
        "vdj_GRCh38_alts_ensembl-4.0.0",
        "10x Cell Ranger Human GRCh38 2020-A",
        "10x Cell Ranger Human GRCh38 2024-A",
        "unknown"
      ]
    },
    "sampleProcessingBatch": {},
    "nucleicAcidSource": {
      "type": "array",
      "items": {
        "enum": [
          "CRISPR protospacer feature barcode",
          "multiplexing oligo",
          "TCR mRNA",
          "Tn5-accessible gDNA",
          "antigen capture barcode",
          "gDNA",
          "intracellular protein feature barcode",
          "surface protein feature barcode",
          "poly(A) RNA",
          "globin-depleted RNA",
          "rRNA-depleted RNA",
          "BCR mRNA"
        ]
      },
      "maxItems": 12
    },
    "specimenModality": {
      "enum": [
        "single specimen",
        "multispecimen"
      ]
    },
    "inputCellCount": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "platform": {
      "type": "array",
      "items": {
        "enum": [
          "CyTOF XT",
          "Chromium Controller",
          "Hyperion",
          "Cytek Aurora",
          "none",
          "BD FACSCanto",
          "BD FACSymphony S6",
          "BD FACSCanto II",
          "Chromium GEM-X Single Cell 3' Chip v4",
          "Not Applicable",
          "Chromium Next GEM Chip H",
          "BD FACSAria Fusion cell sorter",
          "Cytek Aurora Evo",
          "GEM-X Flex Gene Expression Chip",
          "Illumina HiSeq X Ten",
          "Sony MA900",
          "BD FACSMelody",
          "BD FACSAria III",
          "BD LSRFortessa",
          "Chromium X",
          "Chromium Xo",
          "Thermo Fisher Attune CytPix",
          "Chromium Next GEM Chip M",
          "Chromium iX",
          "Illumina HiSeq 2500",
          "GEM-X OCM 5' Chip",
          "Helios Mass Cytometer",
          "Thermo Fisher Attune Xenith",
          "Chromium Next GEM Chip G",
          "Chromium Next GEM Chip K",
          "Olink Signature Q100",
          "Fluidigm BioMark",
          "Illumina NovaSeq X",
          "Thermo Fisher Attune NxT",
          "BD FACSDiscover A8",
          "unknown",
          "BD FACSLyric Clinical",
          "Chromium Next GEM Chip Q",
          "Xenium",
          "Visium CytAssist",
          "Illumina NextSeq 500",
          "Illumina NovaSeq 6000",
          "BD FACSDiscover S8"
        ]
      },
      "maxItems": 43
    },
    "softwareAndVersion": {
      "enum": [
        "Cell Ranger v6.1.1",
        "Space Ranger 3.0.0",
        "Cell Ranger v4.0.0",
        "demuxlet",
        "Cell Ranger v6.0.2",
        "Cell Ranger v7.1.0",
        "Cell Ranger v6.1.2",
        "Cell Ranger v3.0.2",
        "Cell Ranger v3.0.0",
        "Cell Ranger v5.0.0",
        "Cell Ranger v8.0.0",
        "Cell Ranger ATAC v1.1.0",
        "Space Ranger 3.1.2",
        "Cell Ranger v7.2.0",
        "BD FACSDiva 8.0.1",
        "Cell Ranger v3.1.0",
        "Cell Ranger v8.0.1",
        "Cell Ranger v6.1.0",
        "Cell Ranger 9.0.1",
        "Cell Ranger v7.0.1",
        "Space Ranger 3.0.1",
        "Cell Ranger v6.0.1",
        "Cell Ranger v9.0.0",
        "Cell Ranger v3.0.1",
        "Cell Ranger v7.0.0",
        "Space Ranger 3.1.0",
        "Space Ranger 3.1.1",
        "Space Ranger 3.1.3",
        "Cell Ranger v6.0.0",
        "Cell Ranger v5.0.1",
        ""
      ]
    },
    "10xProbeSetReference": {
      "enum": [
        "Visium Human Transcriptome v2",
        "custom probe set",
        "Flex Human Transcriptome Probe Set v1.1.0",
        "Visium Human Transcriptome v1",
        "Flex Human Transcriptome Probe Set v1.0.1",
        ""
      ]
    },
    "biospecimenID": {},
    "libraryID": {}
  },
  "required": [
    "libraryPrepMethod",
    "percentCellViability",
    "assay",
    "Component",
    "totalReads",
    "alignmentReference",
    "nucleicAcidSource",
    "specimenModality",
    "inputCellCount",
    "platform"
  ],
  "allOf": [
    {
      "if": {
        "properties": {
          "libraryPrepMethod": {
            "enum": [
              "10x GEM-X Flex Gene Expression Human"
            ]
          }
        },
        "required": [
          "libraryPrepMethod"
        ]
      },
      "then": {
        "properties": {
          "10xProbeSetReference": {
            "enum": [
              "Visium Human Transcriptome v2",
              "custom probe set",
              "Flex Human Transcriptome Probe Set v1.1.0",
              "Visium Human Transcriptome v1",
              "Flex Human Transcriptome Probe Set v1.0.1"
            ]
          }
        },
        "required": [
          "10xProbeSetReference"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "specimenModality": {
            "enum": [
              "single specimen"
            ]
          }
        },
        "required": [
          "specimenModality"
        ]
      },
      "then": {
        "properties": {
          "biospecimenID": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "biospecimenID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "specimenModality": {
            "enum": [
              "multispecimen"
            ]
          }
        },
        "required": [
          "specimenModality"
        ]
      },
      "then": {
        "properties": {
          "libraryID": {}
        },
        "required": [
          "libraryID"
        ]
      }
    }
  ]
}