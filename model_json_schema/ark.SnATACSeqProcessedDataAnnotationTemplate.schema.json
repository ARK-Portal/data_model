{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://example.com/ark",
  "title": "ark",
  "type": "object",
  "properties": {
    "resourceType": {
      "type": "array",
      "items": {
        "enum": [
          "experimental data",
          "metadata"
        ]
      },
      "maxItems": 2
    },
    "fileFormat": {
      "enum": [
        "csv",
        "h5",
        "xls",
        "fam",
        "bai",
        "tgz",
        "Rds",
        "zip",
        "txt",
        "bed",
        "bim",
        "bam",
        "tsv",
        "mtx",
        "h5ad",
        "xlsx"
      ]
    },
    "Component": {
      "not": {
        "type": "null"
      },
      "minLength": 1
    },
    "specimenModality": {
      "enum": [
        "multispecimen",
        "single specimen"
      ]
    },
    "cellRangerOutput": {
      "enum": [
        "filtered MEX",
        "raw MEX",
        "filtered_peak_bc_matrix",
        "raw_peak_bc_matrix",
        "filtered_feature_bc_matrix",
        "raw_feature_bc_matrix",
        "Not Applicable"
      ]
    },
    "dataLevel": {
      "enum": [
        "4",
        "3",
        "2",
        "5",
        "1"
      ]
    },
    "assay": {
      "type": "array",
      "items": {
        "enum": [
          "H&E",
          "feature barcode sequencing",
          "VDJSeq",
          "Olink Target 96",
          "snRNASeq",
          "CosMX",
          "Visium",
          "flow cytometry",
          "multiplexed ELISA",
          "CyTOF",
          "imaging mass spectrometry",
          "SNP array",
          "CITESeq",
          "Olink Focus",
          "WES",
          "WGS",
          "ASAPSeq",
          "Olink Flex",
          "SomaScan",
          "scVDJSeq",
          "LC-MS/MS",
          "scRNASeq",
          "snATACSeq",
          "NULISA",
          "Olink Explore HT",
          "CE-MS",
          "Olink Reveal",
          "Xenium",
          "imaging mass cytometry",
          "Olink Target 48",
          "RNASeq",
          "serial IHC",
          "GenePS SeqFISH",
          "kiloplex"
        ]
      },
      "maxItems": 34
    },
    "processedDataType": {
      "type": "array",
      "items": {
        "enum": [
          "differential expression results",
          "barcode counts",
          "epigenomic peaks",
          "gene counts",
          ""
        ]
      },
      "maxItems": 4
    },
    "metadataType": {
      "enum": [
        "single-cell metadata",
        ""
      ]
    },
    "RObjectClass": {
      "enum": [
        "data.frame",
        "SummarizedExperiment",
        "sparse matrix",
        "Seurat object",
        "list",
        "matrix",
        "ROCR prediction.object",
        "Symphony reference",
        "vector",
        ""
      ]
    },
    "biospecimenID": {},
    "individualID": {},
    "targetPanel": {},
    "targetPanelSize": {},
    "targetPanelSynID": {}
  },
  "required": [
    "resourceType",
    "fileFormat",
    "Component",
    "specimenModality",
    "cellRangerOutput",
    "dataLevel",
    "assay"
  ],
  "allOf": [
    {
      "if": {
        "properties": {
          "resourceType": {
            "enum": [
              "experimental data"
            ]
          }
        },
        "required": [
          "resourceType"
        ]
      },
      "then": {
        "properties": {
          "processedDataType": {
            "type": "array",
            "items": {
              "enum": [
                "differential expression results",
                "barcode counts",
                "epigenomic peaks",
                "gene counts",
                ""
              ]
            },
            "maxItems": 4
          }
        },
        "required": [
          "processedDataType"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "resourceType": {
            "enum": [
              "metadata"
            ]
          }
        },
        "required": [
          "resourceType"
        ]
      },
      "then": {
        "properties": {
          "metadataType": {
            "enum": [
              "single-cell metadata"
            ]
          }
        },
        "required": [
          "metadataType"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "fileFormat": {
            "enum": [
              "Rds"
            ]
          }
        },
        "required": [
          "fileFormat"
        ]
      },
      "then": {
        "properties": {
          "RObjectClass": {
            "enum": [
              "data.frame",
              "SummarizedExperiment",
              "sparse matrix",
              "Seurat object",
              "list",
              "matrix",
              "ROCR prediction.object",
              "Symphony reference",
              "vector",
              ""
            ]
          }
        },
        "required": [
          "RObjectClass"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "specimenModality": {
            "enum": [
              "single specimen"
            ]
          }
        },
        "required": [
          "specimenModality"
        ]
      },
      "then": {
        "properties": {
          "biospecimenID": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "biospecimenID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "specimenModality": {
            "enum": [
              "single specimen"
            ]
          }
        },
        "required": [
          "specimenModality"
        ]
      },
      "then": {
        "properties": {
          "individualID": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "individualID"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "assay": {
            "enum": [
              "feature barcode sequencing"
            ]
          }
        },
        "required": [
          "assay"
        ]
      },
      "then": {
        "properties": {
          "targetPanel": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "targetPanel"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "assay": {
            "enum": [
              "feature barcode sequencing"
            ]
          }
        },
        "required": [
          "assay"
        ]
      },
      "then": {
        "properties": {
          "targetPanelSize": {}
        },
        "required": [
          "targetPanelSize"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "assay": {
            "enum": [
              "feature barcode sequencing"
            ]
          }
        },
        "required": [
          "assay"
        ]
      },
      "then": {
        "properties": {
          "targetPanelSynID": {
            "not": {
              "type": "null"
            },
            "minLength": 1
          }
        },
        "required": [
          "targetPanelSynID"
        ]
      }
    }
  ]
}